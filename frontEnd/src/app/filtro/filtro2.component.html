<div class="principal">
  <div class="filtros-container">
    <h3>Filtros populares</h3>

    <div class="checkbox-filters">
      <div class="filter-item">
        <input type="checkbox" id="rtx4080" name="rtx4080">
        <label for="rtx4080">Componentes</label>
      </div>
      <div class="filter-item">
        <input type="checkbox" id="rtx4070" name="rtx4070">
        <label for="rtx4070">Ordenadores</label>
      </div>
      <div class="filter-item">
        <input type="checkbox" id="workStudy" name="workStudy">
        <label for="workStudy">Periféricos</label>
      </div>
      <div class="filter-item">
        <input type="checkbox" id="workStudy" name="workStudy">
        <label for="workStudy">Televisores</label>
      </div>
      <div class="filter-item">
        <input type="checkbox" id="workStudy" name="workStudy">
        <label for="workStudy">Audio</label>
      </div>
    </div>

    <div class="filter-section">
      <div class="filter-header">
        <h4>Precio</h4>
        <i class="fa fa-chevron-up"></i>
      </div>
      <div class="price-range-container">
        <div class="price-slider-container">
          <input type="range" min="150" max="9999" [(ngModel)]="minPrice" (input)="updatePriceFilter()"
            class="price-slider min-price">
          <input type="range" min="150" max="9999" [(ngModel)]="maxPrice" (input)="updatePriceFilter()"
            class="price-slider max-price">
          <div class="price-slider-track"></div>
        </div>
        <div class="price-values">
          <span class="min-price-value">{{minPrice}}€</span>
          <span class="max-price-value">{{maxPrice}}€</span>
        </div>
      </div>
    </div>

    <div class="filter-section">
      <div class="filter-header">
        <h4>Marcas</h4>
        <i class="fa fa-chevron-up"></i>
      </div>
      <div class="search-box">
        <input type="text" placeholder="Buscar...">
        <button type="button"><i class="fa fa-search"></i></button>
      </div>
      <div class="brand-filters">
        <div class="brand-item">
          <input type="checkbox" id="pccom" name="pccom">
          <label for="logitech">Logitech</label>
        </div>
        <div class="brand-item">
          <input type="checkbox" id="hp" name="hp">
          <label for="samsung">Samsung</label>
        </div>
        <div class="brand-item">
          <input type="checkbox" id="msi" name="msi">
          <label for="hp">HP</label>
        </div>
        <div class="brand-item">
          <input type="checkbox" id="asus" name="asus">
          <label for="corsair">Corsair</label>
        </div>
      </div>

    </div>
  </div>

  <div class="products-container">
    <div class="sorting-options">
      <div class="sort-buttons">
        <button class="sort-button" [class.active]="currentSort === 'relevance'"
          (click)="sortProducts('relevance')">Relevancia</button>
        <button class="sort-button" [class.active]="currentSort === 'price_asc'"
          (click)="sortProducts('price_asc')">Precio más bajo</button>
        <button class="sort-button" [class.active]="currentSort === 'price_desc'"
          (click)="sortProducts('price_desc')">Precio más alto</button>
      </div>
      <div class="product-count">{{ displayedProducts.length }} productos</div>
    </div>

    <div class="product-grid">
      <!-- Use *ngFor to iterate through displayedProducts -->
      <div class="product-card" *ngFor="let product of displayedProducts" (click)="irAlProducto(product.id!)"
        style="cursor: pointer;">
        <div class="product-image">
          <img [src]="product.imagen" [alt]="product.nombre">
        </div>
        <div class="product-info">
          <h3 class="product-title">{{product.nombre}}</h3>
          <div class="product-price">
            <span class="current-price">{{product.precio}}€</span>
          </div>
          <div class="shipping-info">
            <span class="free-shipping">Envío gratuito. Consulte disponibilidad.</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>